(function(){"use strict";var t={5773:function(t,e,r){var a=r(9242),i=r(3396),n=r(7139);const s={class:"traffic-lights"},o={class:"parent"},u=["onClick"],c={class:"parent"},l={class:"errorText"};function f(t,e,r,f,h,d){var p;const v=(0,i.up)("TrafficLight");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",o,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.dashboards,(e=>((0,i.wg)(),(0,i.iD)("button",{class:(0,n.C_)({button:!0,active:e.uuid===t.currentDashboard.uuid}),type:"button",key:e.uuid,onClick:(0,a.iM)((()=>t.selectDashboard(e)),["prevent"])},(0,n.zw)(t.ucFirst(e.name)),11,u)))),128))]),(0,i._)("div",c,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(null===(p=this.currentDashboard)||void 0===p?void 0:p.trafficLights,(e=>((0,i.wg)(),(0,i.j4)(v,{key:e.uuid,"traffic-light":e,onCheckStatus:t.checkStatus},null,8,["traffic-light","onCheckStatus"])))),128))]),(0,i._)("div",l,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.errors,((t,e)=>((0,i.wg)(),(0,i.iD)("p",{key:e},(0,n.zw)(t),1)))),128))])])}r(1703);var h=r(4870);const d={"status.show":"/status/:id","dashboards.index":"/dashboards","dashboards.show":"/dashboards/:id","dashboards.default":"/dashboards/default",client:"/client"};class p{constructor(t,e){Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"hostName",{enumerable:!0,configurable:!0,writable:!0,value:"localhost"}),Object.defineProperty(this,"protocol",{enumerable:!0,configurable:!0,writable:!0,value:"http"})}get relative(){const t=d[this.name];if("string"===typeof t)return t;throw new Error(`${this.name} is not a valid route`)}get parsed(){const t=/:(?<param>[a-z-_.]+)*/g;return Array.from(this.relative.matchAll(t)).map((t=>{var e;const r=null===(e=t.groups)||void 0===e?void 0:e.param;if("undefined"===typeof this.params)throw new Error(`Route ${this.name} requires parameters`);if("undefined"===typeof this.params[r])throw new Error(`${r} is a required parameter for route ${this.name}`);return[r,this.params[r].toString()]})).reduce(((t,[e,r])=>{const a=new RegExp(`:${e}(?![a-z])?`);return t.replace(a,`${r}/`)}),this.relative)}get full(){return`${this.protocol}://${this.hostName}${this.parsed}`}get host(){return this.hostName}}function v(t,e){return new p(t,e)}function b(t){return t.json().then((e=>{if(!t.ok){const r={...e,status:t.status,statusText:t.statusText};return Promise.reject(r)}return e}))}class g{constructor(t){Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:"happy"}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uuid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dashboardId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=t.id,this.uuid=t.uuid,this.name=t.name,this.dashboardId=t.dashboardId}makeHappy(){"happy"!==this.state&&(this.state="transitioning",setTimeout((()=>{this.state="happy"}),2e3))}makeSad(){"sad"!==this.state&&(this.state="transitioning",setTimeout((()=>{this.state="sad"}),2e3))}}const m={class:"wrapper"},w={class:"outer"},y={class:"inner"},_={class:"label"};function O(t,e,r,a,s,o){return(0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("div",w,[(0,i._)("div",y,[(0,i._)("div",{class:(0,n.C_)(["circle red",t.trafficLight.state])},null,2),(0,i._)("div",{class:(0,n.C_)(["circle amber",t.trafficLight.state])},null,2),(0,i._)("div",{class:(0,n.C_)(["circle green",t.trafficLight.state])},null,2)])]),(0,i._)("div",_,[(0,i._)("h4",null,(0,n.zw)(t.trafficLight.name),1)])])}var j=(0,i.aZ)({name:"TrafficLight",props:{trafficLight:{required:!0,type:Object}},emits:["check-status"],setup(t,{emit:e}){const r=setInterval((()=>e("check-status",t.trafficLight)),1e4);(0,i.Jd)((()=>clearInterval(r)))}}),k=r(89);const L=(0,k.Z)(j,[["render",O],["__scopeId","data-v-d7676852"]]);var P=L,C=(0,i.aZ)({name:"TrafficLights",setup(){const t=(0,h.iH)([]),e=(0,h.iH)(),r=(0,h.iH)([]);function a(t){"string"===typeof t?r.value.push(t):r.value.push(t instanceof Error?t.message:t.statusText)}function n(t){fetch(v("status.show",{id:t.uuid}).full).then(b).then((()=>t.makeHappy())).catch((e=>{t.makeSad(),a(e)}))}function s(t){return t.slice(0,1).toUpperCase()+t.slice(1,t.length).toLowerCase()}function o(t){var r;e.value=t,null===(r=e.value)||void 0===r||r.trafficLights.map(n)}return(0,i.bv)((()=>fetch(v("dashboards.index").full).then(b).then((r=>{var a;t.value=r.map((t=>(t.trafficLights=t.trafficLights.map((t=>(0,h.qj)(new g(t)))),t))),[e.value]=(0,h.qj)(t.value.filter((t=>t.default))),null===(a=e.value)||void 0===a||a.trafficLights.map(n)})).catch(a))),{dashboards:t,currentDashboard:e,errors:r,checkStatus:n,ucFirst:s,selectDashboard:o}},components:{TrafficLight:P}});const D=(0,k.Z)(C,[["render",f],["__scopeId","data-v-6cea8d4e"]]);var T=D,x=r(678);const $=[{path:"/",redirect:"/client"},{path:"/client",name:"client",component:T}],H=(0,x.p7)({history:(0,x.PO)("/"),routes:$});var I=H;(0,a.ri)(T).use(I).mount("#app")}},e={};function r(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,r),n.exports}r.m=t,function(){var t=[];r.O=function(e,a,i,n){if(!a){var s=1/0;for(l=0;l<t.length;l++){a=t[l][0],i=t[l][1],n=t[l][2];for(var o=!0,u=0;u<a.length;u++)(!1&n||s>=n)&&Object.keys(r.O).every((function(t){return r.O[t](a[u])}))?a.splice(u--,1):(o=!1,n<s&&(s=n));if(o){t.splice(l--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var l=t.length;l>0&&t[l-1][2]>n;l--)t[l]=t[l-1];t[l]=[a,i,n]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={47:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,n,s=a[0],o=a[1],u=a[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(u)var l=u(r)}for(e&&e(a);c<s.length;c++)n=s[c],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(l)},a=self["webpackChunktraffic_light"]=self["webpackChunktraffic_light"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(5773)}));a=r.O(a)})();
//# sourceMappingURL=client.1ea2e840.js.map